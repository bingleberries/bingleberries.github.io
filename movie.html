<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bing's Hub</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<style>
  :root{
    --bg:#04050a;
    --panel:#071224;      /* simplified solid panel */
    --accent:#1ea7ff;
    --glass:rgba(255,255,255,0.04);
    --muted:rgba(230,238,248,0.65);
  }
  html,body{
    height:100%;
    margin:0;
    font-family:Inter, system-ui, Arial, sans-serif;
    color:#e6eef8;
    overflow-x:hidden;
    background:var(--bg);
  }

  /* full-screen canvas */
  #space {
    position:fixed;
    inset:0;
    z-index:0;
    display:block;
    background:var(--bg);
  }

  /* nebula + grain (unchanged, sits above canvas) */
  .nebula {
    position:fixed; inset: -10%;
    z-index:1;
    pointer-events:none;
    background:
      radial-gradient(60% 40% at 15% 20%, rgba(16,112,255,0.14), transparent 18%),
      radial-gradient(50% 30% at 85% 70%, rgba(155,50,255,0.10), transparent 18%),
      radial-gradient(40% 40% at 50% 50%, rgba(255,140,100,0.06), transparent 15%),
      transparent;
    mix-blend-mode: screen;
    filter: blur(28px) contrast(1.1) saturate(1.2);
    animation: nebulaDrift 28s linear infinite;
  }
  @keyframes nebulaDrift{
    0%{ transform: translate3d(0,0,0) scale(1) rotate(0deg); }
    50%{ transform: translate3d(-4%,2%,0) scale(1.05) rotate(1deg); }
    100%{ transform: translate3d(0,0,0) scale(1) rotate(0deg); }
  }
  .grain { position:fixed; inset:0; z-index:2; pointer-events:none;
    background-image: radial-gradient(white 0.6px, transparent 0.6px);
    opacity:0.02; transform: scale(1.2);
  }

  /* ===========
     NORMAL NAVBAR
     =========== */
  .navbar {
    position:fixed;
    top:0;
    left:0;
    right:0;
    height:64px;
    z-index:6;
    background: linear-gradient(180deg, var(--panel), rgba(7,18,36,0.95));
    border-bottom: 1px solid rgba(255,255,255,0.03);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:0 12px;
    box-shadow: 0 6px 20px rgba(1,6,18,0.6);
    backdrop-filter: blur(4px);
  }
  .nav-inner {
    width: min(1120px, calc(100% - 24px));
    display:flex; align-items:center; gap:18px;
  }

  .brand { display:flex; gap:12px; align-items:center; min-width:220px; }
  .logo {
    width:40px; height:40px; border-radius:8px;
    background: linear-gradient(135deg, var(--accent), #8b5cf6);
    display:grid; place-items:center; font-weight:800; font-size:18px; color:#00122a;
  }
  .title { font-size:15px; margin:0; font-weight:700; color:#eaf7ff; }
  .subtitle { font-size:11px; color:var(--muted); margin-top:2px; }

  /* center search */
  .search {
    flex:1; display:flex; align-items:center; gap:8px;
    background: rgba(255,255,255,0.02); padding:6px 8px; border-radius:10px;
  }
  .search input{
    flex:1; padding:8px 10px; border-radius:8px; border:0;
    background: transparent; color:inherit; outline:none; font-size:14px;
  }
  .search button {
    padding:8px 10px; border-radius:8px; border:0; background:var(--accent); color:#00122a; cursor:pointer; font-weight:700;
  }

  /* right-side small contact / actions */
  .nav-right { display:flex; gap:8px; align-items:center; min-width:180px; justify-content:flex-end; }

  .chip-row {
    position: absolute;
    left:50%;
    transform: translateX(-50%);
    top:72px; /* below navbar */
    display:flex; gap:8px; padding:10px;
    z-index:5;
    width:min(880px, calc(100% - 48px));
    justify-content:center;
    flex-wrap:wrap;
  }
  .chip { padding:7px 10px; border-radius:999px; background:transparent; border:1px solid rgba(255,255,255,0.04); cursor:pointer; font-size:13px; color:var(--muted); }
  .chip.active { background: linear-gradient(90deg,var(--accent), #6ee7b7); color:#041429; border:0; }

  /* results grid (floating at bottom-left) kept mostly same */
  .results {
    position:fixed;
    left:20px;
    bottom:20px;
    z-index:4;
    width:min(600px, calc(100% - 40px));
    max-height:55vh;
    overflow:auto;
    padding:12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px;
    box-shadow:0 20px 60px rgba(1,6,18,0.6);
    border:1px solid rgba(255,255,255,0.03);
    backdrop-filter: blur(6px);
  }
  .results .item { display:flex; gap:10px; align-items:center; padding:8px; border-radius:8px; cursor:pointer; transition:transform .12s; }
  .results .item:hover { transform: translateY(-4px); }
  .thumb { width:56px; height:64px; border-radius:8px; display:grid; place-items:center; font-weight:800; background: linear-gradient(180deg, rgba(255,255,255,0.03), transparent); color:var(--muted); }
  .meta { font-size:12px; color:var(--muted); }

  .logo-field {
    position:fixed;
    top:20px;
    right:20px;
    z-index:5;
    display:block;
    pointer-events:none;
  }
  .contact {
    pointer-events:auto;
    text-align:center;
    color:var(--muted);
    font-size:14px;
    padding:8px 12px;
    border-radius:10px;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
    border:1px solid rgba(255,255,255,0.02);
    backdrop-filter: blur(6px);
    max-width:320px;
  }

  ::-webkit-scrollbar { width:12px; height:12px; }
  ::-webkit-scrollbar-thumb { background: linear-gradient(var(--accent), #6ee7b7); border-radius:8px; }
  ::-webkit-scrollbar-track { background: rgba(255,255,255,0.02); }

  @media (max-width:900px){
    .nav-inner { gap:10px; }
    .brand { min-width:120px; }
    .chip-row { width:calc(100% - 32px); top:70px; padding:8px; }
    .results { left:12px; right:12px; width:auto; bottom:12px; max-height:45vh; }
    .contact { font-size:13px; padding:10px 12px; max-width:220px; }
  }
  /* add safe top spacing for content under navbar */
  body { padding-top:84px; } /* navbar + chips */
</style>
</head>
<body>
  <!-- canvas for stars + shooting stars -->
  <canvas id="space" aria-hidden="true"></canvas>

  <!-- nebula overlay -->
  <div class="nebula" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <!-- NORMAL NAVBAR -->
  <div class="navbar" role="navigation" aria-label="Main navigation">
    <div class="nav-inner">
      <div class="brand" aria-hidden="false">
        <div class="logo">B</div>
        <div>
          <p class="title">Bing's Hub</p>
          <div class="subtitle">Space theme • search or pick a genre</div>
        </div>
      </div>

      <div class="search" role="search" aria-label="Search movies, comics and shows">
        <input id="q" placeholder="Search movies, comics, shows..." oninput="renderList()" aria-label="Search query" />
        <button id="clear" title="Clear" onclick="clearSearch()">✕</button>
      </div>

      <div class="nav-right">
        <div class="contact">contact <a href="mailto:30barmarsh@gmail.com" style="color:inherit;text-decoration:underline;">30barmarsh@gmail.com</a></div>
      </div>
    </div>
  </div>

  <!-- genres beneath navbar (centered row) -->
  <div class="chip-row" id="genres" role="toolbar" aria-label="Genres"></div>

  <!-- bottom-left results -->
  <div class="results" id="results" role="region" aria-label="Search results"></div>

<script>
/* ============================
   Data (your items)
   ============================ */
const items = [
    {title: "Adventure Time", url: "https://drive.google.com/drive/folders/1OwoKydzUQUUp6n-Nh7CCAQXGLfchU8Ta", genre: "Cartoons"},
  {title: "The CupHead Show", url: "https://drive.google.com/drive/folders/1j_K1YV4w_sHAzwEAaUMl-qSk4qjrYSJ_", genre: "Cartoons"},
  {title: "Five Nights at Freddy's full movie", url: "https://drive.google.com/file/d/1OyO1OdhtfwR883Uvi0QPP5iooGcxTVSY/view", genre: "Horror"},
  {title: "Kirby: Right Back At Ya!", url: "https://drive.google.com/drive/folders/1LawIFQ48UCdP3-VUan7iWTm4l5EonWYw", genre: "Cartoons"},
  {title: "Smiling Critters Series", url: "https://drive.google.com/drive/folders/1rkjwmHMR8j2nqD2DmM2qHt1vVRmNwrXd", genre: "Shows"},
  {title: "Pokémon series", url: "https://drive.google.com/drive/folders/1I7-ZUInlg9jb4R6LGq0qX3n7bjGKPFFO", genre: "Anime"},
  {title: "Pokémon - The First Movie - Mewtwo Strikes Back", url: "https://drive.google.com/file/d/1_5PiiaO_lwVMh3_4Px-TU0modiH11V8r/view", genre: "Movies"},
  {title: "Pokémon Detective Pikachu (2019) 720p", url: "https://drive.google.com/file/d/1lbcxI_SXJBrqnxe4GnZYIk5VDhKxCgoF/view", genre: "Movies"},
  {title: "The Adventures of Super Mario Brothers 3 (complete)", url: "https://drive.google.com/drive/folders/1x8OrNtdQ0KcunMJGMmUNs881lnHUDd2I", genre: "Shows"},
  {title: "Super Mario Super Show", url: "https://drive.google.com/drive/folders/1u2FRXPJq6TFc4DH6pqk8bhe5_Ymgu6GY", genre: "Shows"},
  {title: "Super Mario World", url: "https://drive.google.com/drive/folders/1nw7hzEpAuL_0QVZ-dP4GLstPrTlGg2OI", genre: "Shows"},
  {title: "The Super Mario Bros. Movie (full)", url: "https://drive.google.com/file/d/1OsyF2LKJqjtv0b2Xd9GWOLcYkzny3VZo/view", genre: "Movies"},
  {title: "Sonic the Hedgehog (full movie)", url: "https://drive.google.com/file/d/1HaXeNylNfZXhRudGTNLUWtrN-oAmone4/view", genre: "Movies"},
  {title: "The Little Mermaid (2023)", url: "https://drive.google.com/file/d/1sFYkkRX85JK-a2LRl8_QmZPhYkYIn6KG/view", genre: "Movies"},
  {title: "The Little Mermaid (Ariel unda da sea).mp4", url: "https://drive.google.com/file/d/1GM7QyJzFwEKM2fM42SWb7oIRN2UPUzqM/view", genre: "Movies"},
  {title: "The Lion King.mp4", url: "https://drive.google.com/file/d/1fpkFiPnyvjxCtN6a89i-U2H1cr5_Y_HC/view", genre: "Movies"},
  {title: "Toy Story Trilogy (folder)", url: "https://drive.google.com/drive/folders/1cmpDGlJ-vvs5g1wJKKoimdjPg28MPS39", genre: "Movies"},
  {title: "Toy Story (1995) 720p", url: "https://drive.google.com/file/d/1fW6Ov5NIaRh4h78-qBpWeln_Vs9oEXOQ/view", genre: "Movies"},
  {title: "Toy Story 2 (1999)", url: "https://drive.google.com/file/d/1k3RVDc_Vah1H9lFsXQZJ6mE3KqdDcK_T/view", genre: "Movies"},
  {title: "Toy Story 3", url: "https://drive.google.com/file/d/13msxxmyEco7CRBkO_Ju1SMx5KK4r4Su8/view", genre: "Movies"},
  {title: "Toy Story 4", url: "https://drive.google.com/file/d/1bFUbsQ9VEazeCt5l_VBVDtjCsbJmZ_Vr/preview", genre: "Movies"},
  /* ...more items exist in the file; keep the rest as before... */
];

/* ================
   UI: genres & chips
   ================ */
const fixedGenres = ["All","Movies","Comics","Shows","Horror","Cartoons","Comedy","Anime"];
const genresEl = document.getElementById('genres');
genresEl.innerHTML = fixedGenres.map((g,i)=>`<button class="chip ${i===0?'active':''}" data-genre="${g}" aria-pressed="${i===0}">${g}</button>`).join('');
genresEl.addEventListener('click', e=>{
  const btn = e.target.closest('.chip'); if(!btn) return;
  document.querySelectorAll('.chip').forEach(c=>{ c.classList.remove('active'); c.setAttribute('aria-pressed','false'); });
  btn.classList.add('active'); btn.setAttribute('aria-pressed','true');
  renderList();
});

function clearSearch(){ document.getElementById('q').value=''; renderList(); }

/* ================
   Render results (fixed index bug)
   ================ */
function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

function renderList(){
  const q = document.getElementById('q').value.trim().toLowerCase();
  const active = document.querySelector('.chip.active')?.dataset.genre || 'All';
  const results = document.getElementById('results');

  // keep original indices so clicks always map to the right item
  const withIndex = items.map((it,origIdx)=>({it, origIdx}));
  const filtered = withIndex.filter(({it})=>{
    if(active!=='All' && it.genre.toLowerCase()!==active.toLowerCase()) return false;
    if(!q) return true;
    return (it.title + ' ' + it.genre).toLowerCase().includes(q);
  });

  results.innerHTML = filtered.map(({it, origIdx})=>{
    const initials = (it.title.split(' ').slice(0,2).map(s=>s[0]||'').join('')) || '?';
    return `
      <div class="item" role="button" tabindex="0" data-index="${origIdx}">
        <div class="thumb">${escapeHtml(initials)}</div>
        <div style="flex:1">
          <div style="font-weight:700">${escapeHtml(it.title)}</div>
          <div class="meta">${escapeHtml(it.genre)}</div>
        </div>
        <div style="font-size:12px;color:var(--muted);padding-left:6px">↗</div>
      </div>
    `;
  }).join('') || '<div style="color:var(--muted);padding:8px">Nothing found</div>';
}
renderList();

/* =========================
   Click / keyboard handling
   ========================= */
const resultsEl = document.getElementById('results');

resultsEl.addEventListener('click', (e)=>{
  const row = e.target.closest('.item');
  if(!row) return;
  const idx = parseInt(row.dataset.index,10);
  openItem(idx);
});

resultsEl.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter'){
    const row = e.target.closest('.item');
    if(!row) return;
    const idx = parseInt(row.dataset.index,10);
    openItem(idx);
  }
});

window.openItem = function(i){
  const url = items[i]?.url;
  if(!url) return;
  window.open(url, '_blank', 'noopener,noreferrer');
};

/* ============================
   Canvas stars + shooting stars
   (unchanged from previous behavior)
   ============================ */
const canvas = document.getElementById('space');
const ctx = canvas.getContext('2d', { alpha: false });
let DPR = Math.max(1, window.devicePixelRatio || 1);

function resizeCanvas(){
  DPR = Math.max(1, window.devicePixelRatio || 1);
  canvas.width = Math.floor(window.innerWidth * DPR);
  canvas.height = Math.floor(window.innerHeight * DPR);
  canvas.style.width = window.innerWidth + 'px';
  canvas.style.height = window.innerHeight + 'px';
  ctx.setTransform(DPR,0,0,DPR,0,0);
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

const STAR_COUNT = Math.round((window.innerWidth * window.innerHeight) / 14000);
const stars = [];
for(let i=0;i<STAR_COUNT;i++){
  stars.push({
    x: Math.random() * window.innerWidth,
    y: Math.random() * window.innerHeight,
    r: Math.random()*1.6 + 0.2,
    alpha: Math.random()*0.9 + 0.1,
    twinkleSpeed: Math.random()*0.02 + 0.002,
    phase: Math.random()*Math.PI*2
  });
}

const shootingStars = [];
function spawnShootingStar(){
  const fromLeft = Math.random() < 0.5;
  const startX = fromLeft ? Math.random()*window.innerWidth*0.25 : Math.random()*(window.innerWidth*0.75)+window.innerWidth*0.25;
  const startY = Math.random()*window.innerHeight*0.35;
  const angle = (Math.random()*20 + 10) * Math.PI/180; // shallow angle
  const speed = Math.random()*900 + 600;
  shootingStars.push({
    x: startX,
    y: startY,
    vx: Math.cos(angle) * speed * (fromLeft ? 1 : -1),
    vy: Math.sin(angle) * speed,
    life: 0,
    ttl: Math.random()*800 + 600,
    len: Math.random()*220 + 120
  });
  setTimeout(spawnShootingStar, Math.random()*3500 + 900);
}
setTimeout(spawnShootingStar, 1200);

let last = performance.now();
function tick(now){
  const dt = Math.min(40, now - last);
  last = now;
  ctx.fillStyle = '#04050a';
  ctx.fillRect(0,0, canvas.width/DPR, canvas.height/DPR);

  for(let s of stars){
    s.phase += s.twinkleSpeed * (dt/16);
    const a = s.alpha * (0.6 + Math.sin(s.phase)*0.4);
    ctx.beginPath();
    ctx.fillStyle = `rgba(255,255,255,${a})`;
    ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
    ctx.fill();
  }

  for(let i=0;i<6;i++){
    const idx = (i*73) % stars.length;
    const s = stars[idx];
    ctx.beginPath();
    const grad = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, s.r*12);
    grad.addColorStop(0, 'rgba(255,255,255,0.03)');
    grad.addColorStop(1, 'rgba(255,255,255,0)');
    ctx.fillStyle = grad;
    ctx.fillRect(s.x - s.r*12, s.y - s.r*12, s.r*24, s.r*24);
    ctx.fill();
  }

  for(let i = shootingStars.length-1; i>=0; i--){
    const st = shootingStars[i];
    st.x += st.vx * (dt/1000);
    st.y += st.vy * (dt/1000);
    st.life += dt;
    const t = st.life / st.ttl;
    const tx = st.x - st.vx * 0.02;
    const ty = st.y - st.vy * 0.02;
    ctx.save();
    const grad = ctx.createLinearGradient(st.x, st.y, tx, ty);
    grad.addColorStop(0, 'rgba(255,255,255,0.95)');
    grad.addColorStop(1, 'rgba(255,255,255,0)');
    ctx.strokeStyle = grad;
    ctx.lineWidth = 2.2;
    ctx.beginPath();
    ctx.moveTo(st.x, st.y);
    ctx.lineTo(st.x - st.vx/60, st.y - st.vy/60);
    ctx.stroke();

    ctx.beginPath();
    ctx.fillStyle = `rgba(255,255,255,${1 - t})`;
    ctx.arc(st.x, st.y, 2.6 + (1-t)*2, 0, Math.PI*2);
    ctx.fill();
    ctx.restore();

    if(st.life > st.ttl || st.x < -100 || st.x > window.innerWidth+100 || st.y > window.innerHeight+200){
      shootingStars.splice(i,1);
    }
  }

  requestAnimationFrame(tick);
}
requestAnimationFrame(tick);

window.addEventListener('resize', ()=>{
  for(let s of stars){
    s.x = Math.min(window.innerWidth, s.x);
    s.y = Math.min(window.innerHeight, s.y);
  }
});

/* accessibility: focus on search when press / */
window.addEventListener('keydown', (e)=>{
  if(e.key === '/') { e.preventDefault(); document.getElementById('q').focus(); }
});
</script>
</body>
</html>
